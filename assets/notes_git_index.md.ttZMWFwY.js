import{_ as i,c as a,o as n,ae as e}from"./chunks/framework.QHFhIKkZ.js";const g=JSON.parse('{"title":"GIT 笔记","description":"","frontmatter":{"sidebar":"auto"},"headers":[],"relativePath":"notes/git/index.md","filePath":"notes/git/index.md"}'),l={name:"notes/git/index.md"};function t(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="git-笔记" tabindex="-1">GIT 笔记 <a class="header-anchor" href="#git-笔记" aria-label="Permalink to &quot;GIT 笔记&quot;">​</a></h1><h2 id="怎么使用vscode编辑git-info" tabindex="-1">怎么使用vscode编辑git info <a class="header-anchor" href="#怎么使用vscode编辑git-info" aria-label="Permalink to &quot;怎么使用vscode编辑git info&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.editor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;code --wait&quot;</span></span></code></pre></div><h2 id="一些必要的全局配置" tabindex="-1">一些必要的全局配置 <a class="header-anchor" href="#一些必要的全局配置" aria-label="Permalink to &quot;一些必要的全局配置&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#全局rebase</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull.rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#大小写敏感</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.ignorecase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#文件检查</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.fsmonitor</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span></code></pre></div><h2 id="rebase" tabindex="-1">Rebase <a class="header-anchor" href="#rebase" aria-label="Permalink to &quot;Rebase&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基本变基</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">目标分</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">支</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 交互式变基（最常用）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~n</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 修改最近n个提交</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">提交哈</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">希</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 基于指定提交变基</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 变基操作命令</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --continue</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 解决冲突后继续</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --abort</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 中止变基</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rebase</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --skip</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 跳过当前提交</span></span></code></pre></div><ul><li>整理本地提交历史</li><li>保持线性、清晰的提交历史</li><li>更新功能分支（无合并提交）</li><li>修改、合并、拆分或删除提交</li></ul><h2 id="关于历史包拆分" tabindex="-1">关于历史包拆分 <a class="header-anchor" href="#关于历史包拆分" aria-label="Permalink to &quot;关于历史包拆分&quot;">​</a></h2><p>比如我现在有 3 个提交</p><pre><code>提交1 hash axx
提交2 hash bxx
提交3 hash cxx
</code></pre><p>我现在需要拆分提交 2</p><ol><li><code>git rebase -i cxx</code></li><li>将<strong>提交 2</strong>的操作改为 edit</li><li>使用<code>git reset HEAD~1</code>使提交回退一个版本,将修改从缓冲区取出</li><li>将需要拆分的文件使用<code>git commit -m xxx</code>进行分别提交,提交</li><li>使用<code>git rebase --continue</code>继续变基,等待变基完毕即可</li><li>由于 rebase 后 hash 修改,使用<code>git push -f</code>提交覆盖云端</li></ol><h2 id="关于误删除" tabindex="-1">关于误删除 <a class="header-anchor" href="#关于误删除" aria-label="Permalink to &quot;关于误删除&quot;">​</a></h2><p>首先查询所有历史操作，以下命令都可 <code>git log -g</code><code>git reflog show</code></p><p>找到对应的 logHash</p><p><code>git reset --hard logHash</code></p><h2 id="关于ssh-agent代理" tabindex="-1">关于ssh agent代理 <a class="header-anchor" href="#关于ssh-agent代理" aria-label="Permalink to &quot;关于ssh agent代理&quot;">​</a></h2><h2 id="windows-powershell" tabindex="-1">windows-powershell <a class="header-anchor" href="#windows-powershell" aria-label="Permalink to &quot;windows-powershell&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查服务状态</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置服务启动类型为自动</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Set-Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StartupType Automatic</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Start-Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agent</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#将私钥添加到ssh-agent</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#添加私钥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">add ~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id_rsa</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#查询添加哪些私钥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">add </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除所有私钥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ssh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">add </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span></span></code></pre></div><h3 id="windows" tabindex="-1">windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;windows&quot;">​</a></h3><p><a href="https://blog.csdn.net/jchnlau/article/details/140714151" target="_blank" rel="noreferrer">https://blog.csdn.net/jchnlau/article/details/140714151</a></p><h3 id="warning-unprotected-private-key-file" tabindex="-1">WARNING: UNPROTECTED PRIVATE KEY FILE! <a class="header-anchor" href="#warning-unprotected-private-key-file" aria-label="Permalink to &quot;WARNING: UNPROTECTED PRIVATE KEY FILE!&quot;">​</a></h3><p><a href="https://superuser.com/questions/1296024/windows-ssh-permissions-for-private-key-are-too-open" target="_blank" rel="noreferrer">https://superuser.com/questions/1296024/windows-ssh-permissions-for-private-key-are-too-open</a></p><h3 id="样例" tabindex="-1">样例 <a class="header-anchor" href="#样例" aria-label="Permalink to &quot;样例&quot;">​</a></h3><p>以id_rsa为例</p><p>git 使用 windows ssh</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core.sshCommand</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;C:/Windows/System32/OpenSSH/ssh.exe&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#全局使用windows ssh，来调起windows自带的ssh anget</span></span></code></pre></div><p>~/.ssh 右键-属性-安全，确保id_rsa安全只有当前用户一人</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#输入密码</span></span></code></pre></div><p>配置~/.ssh/config 使用<code>git remote get-url origin</code>可以获取当前git的 用户@服务器 如:git@codeup.aliyun.com 那么配置文件格式如下</p><div class="language-config vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">config</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Host codeup.aliyun.com</span></span>
<span class="line"><span>    HostName codeup.aliyun.com</span></span>
<span class="line"><span>    User git</span></span>
<span class="line"><span>    ForwardAgent yes</span></span>
<span class="line"><span>    IdentityFile ~/.ssh/id_rsa</span></span>
<span class="line"><span>    AddKeysToAgent yes</span></span></code></pre></div>`,32)])])}const c=i(l,[["render",t]]);export{g as __pageData,c as default};
